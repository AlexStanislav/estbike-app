import{A as i,u as q,o as x,a as A,b as _,c as I,d as l,f as k,G as b,h as D,j as N,l as y,F as P,x as F,e as T,Y as E,Z as $}from"./index-gzTCROJD.js";import{s as M}from"./dropdown.esm-EtgbZxWH.js";const G=(u,r)=>{const p=u.__vccOpts||u;for(const[v,f]of r)p[v]=f;return p},h=u=>(E("data-v-19bb4312"),u=u(),$(),u),J={class:"utile"},Y=h(()=>l("h1",null,"Date utile",-1)),Z={class:"utile-top-section"},z={class:"utile-filters"},H={class:"p-float-label"},K=h(()=>l("label",null,"Marca",-1)),Q={class:"p-float-label"},W=h(()=>l("label",null,"Capacitate cilindrica",-1)),X={class:"p-float-label"},ee=h(()=>l("label",null,"Model",-1)),te={class:"utile-bike-image"},ae=["src"],le={class:"utile-bottom-section"},oe={class:"utile-tech-info"},ne={class:"tech-table"},se={colspan:"2"},ce={__name:"UtileView",setup(u){const r=i([]),p=i([]),v=i([]),f=i([]),m=i("#"),g=i(""),w=i([]),a=i({brand:null,capacitate:null,model:null}),d=q();x(()=>{d.togglePreloader(!0)}),A(async()=>{const o=document.querySelector(".desktop-nav");o!==null&&o.classList.add("sticky"),setTimeout(()=>{d.togglePreloader(!1)},1e3),d.allBikes===null&&await d.getAllBikes(),r.value=C(d.allBikes),p.value=V(r.value)});function C(o){return Object.values(o).flat().filter(n=>n.display_model)}function V(o){const e=[];return o.forEach(t=>{t.tech!==null&&e.push((t.brand.split("")[0].toUpperCase()+t.brand.slice(1)).replace("_"," "))}),[...new Set(e)]}function U(o){const e=o.value,t=S(e);v.value=t,f.value=[],a.value.capacitate=null,a.value.model=null,m.value="#"}function S(o=null){let e=[],t;for(const s of r.value)o!==null&&s.brand===o.toLowerCase().replace(" ","_")&&(t=s.capacitate,t!==null&&e.push(t)),o===null&&(t=s.capacitate,t!==null&&e.push(t));for(let s in e){const c=e[s];c<50&&(e[s]=(Math.round(c/25)*25).toString()),c>=50&&c<125&&(e[s]="50"),c>=120&&c<200&&(e[s]="125"),c>=200&&c<=500&&(e[s]="200-500"),c>500&&c<=800&&(e[s]="500-800"),c>800&&(e[s]="800+")}return[...new Set([...new Set(e)])].sort((s,c)=>{const O=parseInt(s.split("-")[0]),j=parseInt(c.split("-")[0]);return O-j})}function B(){const o=r.value.filter(e=>{const t=!a.value.brand||e.brand===a.value.brand.toLowerCase().replace(" ","_");let n=!0;return a.value.capacitate.includes("-")?n=parseInt(e.capacitate)>=parseInt(a.value.capacitate.split("-")[0])&&parseInt(e.capacitate)<=parseInt(a.value.capacitate.split("-")[1]):a.value.capacitate.includes("+")?n=parseInt(e.capacitate)>=800:(parseInt(a.value.capacitate)===50&&(n=parseInt(e.capacitate)>=50&&parseInt(e.capacitate)<100),parseInt(a.value.capacitate)===125&&(n=parseInt(e.capacitate)>=120&&parseInt(e.capacitate)<200)),t&&n});for(const e of o)e.bike_name=e.bike_name.replace(/-/g," ").toUpperCase();a.value.model=null,m.value="#",f.value=o,g.value="",w.value=[]}function L(){m.value=a.value.model.image,g.value=a.value.model.bike_name,w.value=a.value.model.tech}async function R(){const e=await(await fetch(`${d.serverURL}/api/downloadPDF`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value.model)})).blob(),t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,n.download="tech-data.pdf",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)}return(o,e)=>(_(),I("section",J,[Y,l("section",Z,[l("section",z,[l("span",H,[k(b(M),{modelValue:a.value.brand,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.brand=t),options:p.value,onChange:U},null,8,["modelValue","options"]),K]),l("span",Q,[k(b(M),{modelValue:a.value.capacitate,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.capacitate=t),options:v.value,onChange:B},null,8,["modelValue","options"]),W]),l("span",X,[k(b(M),{modelValue:a.value.model,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.model=t),optionLabel:"bike_name",options:f.value,onChange:L},null,8,["modelValue","options"]),ee])]),l("section",te,[l("img",{src:m.value,alt:""},null,8,ae)])]),l("section",le,[a.value.model!==null?(_(),D(b(T),{key:0,class:"download-button",severity:"danger",label:"Descarca",icon:"pi pi-download",onClick:e[3]||(e[3]=t=>R())})):N("",!0),l("section",oe,[l("table",ne,[l("th",se,[l("h2",null,y(g.value),1)]),(_(!0),I(P,null,F(w.value,(t,n)=>(_(),I("tr",{key:n},[l("td",null,y(t.label.split("")[0].toUpperCase()+t.label.slice(1)),1),l("td",null,y(t.value),1)]))),128))])])])]))}},re=G(ce,[["__scopeId","data-v-19bb4312"]]);export{re as default};
