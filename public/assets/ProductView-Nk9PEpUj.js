import{u as q,r as u,o as z,a as D,L as F,M as J,b as i,c as n,e as t,A as d,t as s,j as C,w as H,H as v,q as c,F as S,f as N,N as L}from"./index-6xppyCuW.js";import{s as j}from"./dropdown.esm-SCz5GtVN.js";const G={class:"product"},K={class:"product-top-container"},Q={class:"product-header"},W=t("span",null,"Acasa",-1),X=t("span",null,"Modele",-1),Y={class:"bike-name-crumb"},Z={class:"product-info-left"},ee={class:"product-img-container"},te=["src"],le=["src","onClick"],ae={class:"product-left-info-details"},se=t("h2",null,"Detalii utile",-1),ie=t("li",null,[t("i",{class:"pi pi-percentage"}),d("Rate fara dobanda")],-1),ne=t("li",null,[t("i",{class:"pi pi-chart-bar"}),d("Finantare flexibila in rate ")],-1),oe=t("li",null,[t("i",{class:"pi pi-money-bill"}),d("Rate fara avans")],-1),re={key:0},ce=t("i",{class:"pi pi-car"},null,-1),ue={key:0,class:"installment-container"},de=t("h2",null,"Calculeaza-ti ratele",-1),pe={class:"installment-price"},_e={class:"installment-price"},ve={class:"product-info-right"},he={class:"product-info-details"},me={class:"bike-subtitle"},fe={class:"bike-subtitle"},ke={key:0},be={class:"bike-subtitle"},ge={key:1,class:"product-description"},ye={class:"product-info-price"},Me={key:0,class:"eur-price"},Be={key:0},Ce={key:1,class:"ron-price"},Se={key:0},Ne={key:2,class:"product-info-price-discount"},Ve={class:"product-bottom-container"},xe=t("h2",null,"Modele similare",-1),Ie={class:"similar-models-container"},Re=["onClick"],Ue={class:"similar-img-container"},Ae=["src"],we={class:"similar-info-container"},Pe={key:0},Oe={key:1},Te={key:2},ze={__name:"ProductView",setup(Ee){const o=q(),e=u({}),h=u(""),k=u([]),b=u(0),m=u(""),g=u(""),_=u(12),V=u([12,24,36,48]),y=u([]),x=document.querySelector(".desktop-nav")!==null?document.querySelector(".desktop-nav"):document.querySelector(".mobile-nav");z(()=>{o.togglePreloader(!0),o.currentBike===null&&(o.currentBike=JSON.parse(localStorage.getItem("currentBike"))),setTimeout(()=>{o.togglePreloader(!1)},1e3)});function f(){o.currentBike===null&&(o.currentBike=JSON.parse(localStorage.getItem("currentBike"))),e.value=o.currentBike,h.value=e.value.image,k.value=w(),m.value=e.value.bike_name.toUpperCase(),g.value=e.value.bike_slogan!==null?e.value.bike_slogan.toUpperCase():"",e.value.old_price!=="null"&&e.value.old_price!==""&&(b.value=Math.round((e.value.price-e.value.old_price)/e.value.price*100).toFixed(0)),y.value=R(U()[0],4)}D(()=>{x.classList.add("sticky"),setTimeout(()=>{f()},300)});const I=l=>{localStorage.setItem("currentBike",JSON.stringify(l)),o.setCurrentBike(l),f(),window.scrollTo(0,0)};function R(l,r){if(!Array.isArray(l)||l.length===0||r<=0)return[];const a=Math.floor(Math.random()*(l.length-r+1)),p=a+r;return l.slice(a,p)}const U=()=>{const l=[];for(const r in o.allBikes){const a=o.allBikes[r];for(const p in a){const B=a[p];B.bike_name!==void 0&&B.bike_name===e.value.bike_name&&l.push(a)}}return[...l]},A=()=>e.value.bike_category===""?e.value.bike_slogan:e.value.bike_description,w=()=>{const l=[];if(e.value.gallery===null)return l;if(e.value.gallery[0]==="")l.push(M(e.value.image));else for(const r of e.value.gallery)l.push(M(r));return l},M=l=>(l.includes("$http")&&(l=l.replace("$http","http")),l.includes("motoboom")&&(l=l.replace("125x1","650x1")),l),P=()=>{if(e.value.category!==void 0&&e.value.category!==null)return e.value.category.toUpperCase()},O=()=>Math.round(e.value.price/_.value),T=()=>Math.round(Math.ceil(e.value.price*o.forexValue)/_.value);function E(l){h.value=l}const $=F(()=>{if(e.value.rabla!=="null"&&e.value.rabla!=="undefined"&&e.value.rabla!==null&&e.value.rabla!==void 0&&e.value.rabla!==""&&e.value.rabla!=="NU"&&e.value.rabla!=="nu"&&e.value.rabla!=="Nu"&&e.value.rabla!=="nU"&&e.value.rabla!==!1&&e.value.rabla!=="false")return!0});return J(()=>{f()}),(l,r)=>(i(),n("div",G,[t("div",K,[t("div",Q,[W,d(" / "),X,d(" / "),t("span",Y,s(m.value),1)]),t("section",Z,[t("div",ee,[t("img",{lazy:"",src:h.value,alt:""},null,8,te),C(v(L),{class:"product-carousel",verticalViewPortHeight:"400px",circular:!0,numVisible:5,value:k.value,showIndicators:!1,orientation:"vertical"},{item:H(a=>[t("img",{class:"product-carousel-img",src:a.data,onClick:p=>E(a.data)},null,8,le)]),_:1},8,["value"])]),t("div",ae,[t("div",null,[se,t("ul",null,[ie,ne,oe,$.value?(i(),n("li",re,[ce,d("Program RABLA")])):c("",!0)])]),e.value.price!==null?(i(),n("div",ue,[de,t("label",null,[d(" Pentru a plati suma totala in "),C(v(j),{options:V.value,modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=a=>_.value=a)},null,8,["options","modelValue"]),d(" luni ")]),t("div",pe," Va trebuii sa platiti: "+s(O())+" EUR pe luna ",1),t("div",_e," SAU "+s(T())+" RON pe luna ",1)])):c("",!0)])]),t("section",ve,[t("div",he,[t("h1",null,s(m.value),1),t("div",me," Producator: "+s(e.value.brand!==void 0?e.value.brand.toUpperCase():"Necunoscut"),1),t("div",fe,"Categoria: "+s(P()),1),e.value.permis!==void 0&&e.value.permis.length>0?(i(),n("div",ke,[d(" Permis: "),(i(!0),n(S,null,N(e.value.permis,a=>(i(),n("span",{class:"info-permis",key:a},s(a),1))),128))])):c("",!0),t("div",be," Tip Vehicul: "+s(e.value.vehicle_type!==void 0?e.value.vehicle_type.replace("bikes","Motociclete").replace("scooters","Scutere").replace("atv","ATV"):"Necunoscut"),1),t("p",null,s(g.value),1),e.value.bike_description!==""?(i(),n("p",ge,s(A()),1)):c("",!0)]),t("div",ye,[e.value.price!==null?(i(),n("div",Me,[t("span",null,s(e.value.price)+" EUR",1),e.value.old_price!==null?(i(),n("s",Be,s(e.value.old_price)+" EUR",1)):c("",!0)])):c("",!0),e.value.price!==null?(i(),n("div",Ce,[t("span",null,s(Math.ceil(e.value.price*v(o).forexValue))+" RON",1),e.value.old_price!==null?(i(),n("s",Se,s(Math.ceil(e.value.old_price*v(o).forexValue))+" RON",1)):c("",!0)])):c("",!0),e.value.old_price!==null?(i(),n("div",Ne," Reducere de "+s(b.value)+"% ",1)):c("",!0)])])]),t("div",Ve,[xe,t("div",Ie,[(i(!0),n(S,null,N(y.value,a=>(i(),n("div",{class:"similar-model-card",key:a,onClick:p=>I(a)},[t("div",Ue,[t("img",{lazy:"",src:a.image,alt:""},null,8,Ae)]),t("div",we,[t("h3",null,s(a.bike_name.toUpperCase()),1),a.price!==null?(i(),n("h4",Pe,s(a.price)+" "+s(a.currency),1)):(i(),n("h4",Oe,"Pret Indisponibil")),a.old_price!==null?(i(),n("h4",Te,[t("s",null,s(a.old_price)+" "+s(a.currency),1)])):c("",!0)])],8,Re))),128))])])]))}};export{ze as default};
